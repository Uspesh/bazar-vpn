## Как запустить проект

- создайте виртиульное окружение и войдите в него
- бд. В проекте используется SQLite. Создайте файл с расширением .db и сделайте так чтобы ваше название соответствовало 
названию пути к бд в файле src/database.py
- установите все зависимости - pip install -r requirements.txt
- проведите миграции. Создайте файл .env и добавьте в него параметр DB_NAME = <имя вашей базы данных>.
Если у вас есть директория migrations и файл alembic.ini посмотрите наличие версий в папке version и если она не пуста выполните команду alembic upgrade head.
Если у вас ничего нет тогда:
1. Создайте файл .env и добавьте в него параметр DB_NAME = <имя вашей базы данных>.
2. alembic init migrations
3. в migrations/env.py добавьте config.set_section_option(section, 'DB_NAME', DB_NAME) и target_metadata = Base.metadata
4. в файле alembic.ini найдите параметр и поставьте в него это значение - sqlalchemy.url = sqlite:///%(DB_NAME)s
5. alembic revision --autogenerate -m "Init"
6. проверьте что в папке migrations/versions/ есть файл и посмотрите что в функции upgrade есть данные и она не пуста
7. alembic upgrade head

- далее запустите докер, если он у вас установлен иначе установите и запустите.
- если у вас есть redis на компьютере то выполните команду по его остановке, в линукс это команда sudo service redis-server stop(так же эта команда может понадобится если возникает ошибка что порт 6379 занят при попытке запустить приложение через докер)
- docker compose up --build. Если вы запускаете на сервере добавьте парамет -d - docker compose up -d --build(это позволит вам закрыть терминал без прекращения работы бота)

## Особенности запуска
- для запуска на локальной машине без !докера! сменить все импорты файлов с .<имя> на <имя> или src.<имя>. Например формат импорта для докера - .keyboard, для локального запуска keyboard или src.keyboard.
- не забывать от глобальной переменной DEBUG(см. файл env.md)
- чтобы проверить работоспособность всей системы не забывайте что в проекте используются Redis, Celery, Flower, Celery Beat. Посмотреть команды для запуска можно по пути docker/celery.sh(После слова then на следующей строке прописана команда для запуска того или иного сервиса)

## Навигация по документации
- env.md - описание всех необходимых зависимостей для правильной работы
- models.md - описание структуры базы данных
- database_functions.md - описание всех функций работы с базой данных
- background_tasks.md - описание фоновых задач которые используются


### Приятного пользования.